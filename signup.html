<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up - V0 Trade</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .mobile-menu { display: none; }
        .mobile-menu.active { display: block; }
        .dropdown { position: relative; display: inline-block; }
        .dropdown-content { display: none; position: absolute; background-color: rgb(15 23 42 / 0.95); min-width: 12rem; border: 1px solid rgb(168 85 247 / 0.2); border-radius: 0.5rem; padding: 0.5rem; z-index: 1000; }
        .dropdown:hover .dropdown-content { display: block; }
    </style>
</head>
<body class="bg-gradient-to-b from-slate-950 via-purple-950 to-slate-950 text-white min-h-screen">

    <!-- Header -->
    <header class="sticky top-0 z-50 border-b border-purple-500/20 bg-slate-950/80 backdrop-blur-md">
        <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between py-4">
                <a href="index.html" class="flex items-center gap-2 hover:opacity-80 transition">
                    <div class="h-10 w-10">
                        <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" class="w-full h-full">
                            <defs>
                                <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color: #a78bfa" />
                                    <stop offset="50%" style="stop-color: #ec4899" />
                                    <stop offset="100%" style="stop-color: #06b6d4" />
                                </linearGradient>
                            </defs>
                            <circle cx="100" cy="100" r="95" fill="url(#logoGradient)" opacity="0.2" />
                            <circle cx="100" cy="100" r="90" fill="none" stroke="url(#logoGradient)" stroke-width="2" />
                            <path d="M 50 60 L 80 140 M 150 60 L 120 140" stroke="url(#logoGradient)" stroke-width="8" stroke-linecap="round" fill="none" />
                            <circle cx="100" cy="100" r="25" fill="none" stroke="url(#logoGradient)" stroke-width="6" />
                        </svg>
                    </div>
                    <span class="text-xl font-bold bg-gradient-to-r from-purple-400 via-pink-400 to-cyan-400 bg-clip-text text-transparent">V0 Trade</span>
                </a>

                <nav class="hidden items-center gap-8 md:flex">
                    <a href="index.html" class="text-sm text-gray-300 hover:text-white transition">Home</a>

                    <div class="dropdown">
                        <button class="text-sm text-gray-300 hover:text-white transition flex items-center gap-1">Invest <span>▼</span></button>
                        <div class="dropdown-content">
                            <a href="cryptocurrencies.html" class="block px-3 py-2 text-sm text-gray-300 hover:text-white hover:bg-purple-500/10 rounded">Cryptocurrencies</a>
                            <a href="precious-metals.html" class="block px-3 py-2 text-sm text-gray-300 hover:text-white hover:bg-purple-500/10 rounded">Precious Metals</a>
                            <a href="stocks.html" class="block px-3 py-2 text-sm text-gray-300 hover:text-white hover:bg-purple-500/10 rounded">Stocks</a>
                            <a href="etfs.html" class="block px-3 py-2 text-sm text-gray-300 hover:text-white hover:bg-purple-500/10 rounded">ETFs</a>
                        </div>
                    </div>

                    <a href="btc-miner.html" class="text-sm text-gray-300 hover:text-white transition">BTC Miner</a>
                    <a href="about.html" class="text-sm text-gray-300 hover:text-white transition">About</a>
                    <a href="security.html" class="text-sm text-gray-300 hover:text-white transition">Security</a>

                    <div class="dropdown">
                        <button class="text-sm text-gray-300 hover:text-white transition flex items-center gap-1">Support <span>▼</span></button>
                        <div class="dropdown-content">
                            <a href="contact.html" class="block px-3 py-2 text-sm hover:bg-purple-500/10 rounded text-gray-300 hover:text-white">Contact Support</a>
                            <a href="faq.html" class="block px-3 py-2 text-sm hover:bg-purple-500/10 rounded text-gray-300 hover:text-white">FAQ</a>
                        </div>
                    </div>
                </nav>

                <div class="hidden items-center gap-4 md:flex">
                    <a href="login.html" class="text-sm text-gray-300 hover:text-white transition">Login</a>
                    <a href="signup.html" class="inline-flex items-center justify-center rounded-md text-sm font-medium bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white px-4 py-2 transition">Sign Up</a>
                </div>

                <button class="md:hidden" onclick="toggleMobileMenu()">
                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                    </svg>
                </button>
            </div>

            <div id="mobileMenu" class="mobile-menu border-t border-purple-500/20 py-4 md:hidden">
                <nav class="flex flex-col gap-3">
                    <a href="index.html" class="text-sm text-gray-300 hover:text-white">Home</a>
                    <a href="cryptocurrencies.html" class="text-sm text-gray-300 hover:text-white">Cryptocurrencies</a>
                    <a href="precious-metals.html" class="text-sm text-gray-300 hover:text-white">Precious Metals</a>
                    <a href="stocks.html" class="text-sm text-gray-300 hover:text-white">Stocks</a>
                    <a href="etfs.html" class="text-sm text-gray-300 hover:text-white">ETFs</a>
                    <a href="btc-miner.html" class="text-sm text-gray-300 hover:text-white">BTC Miner</a>
                    <a href="about.html" class="text-sm text-gray-300 hover:text-white">About</a>
                    <a href="security.html" class="text-sm text-gray-300 hover:text-white">Security</a>
                    <a href="contact.html" class="text-sm text-gray-300 hover:text-white">Contact</a>
                    <a href="faq.html" class="text-sm text-gray-300 hover:text-white">FAQ</a>
                    <a href="login.html" class="text-sm text-gray-300 hover:text-white">Login</a>
                    <a href="signup.html" class="text-sm bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-2 rounded inline-block">Sign Up</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Signup Form -->
    <main class="flex items-center justify-center px-4 py-24">
        <div class="w-full max-w-md">
            <div class="bg-slate-900/80 border border-purple-500/20 rounded-2xl p-8 backdrop-blur-xl shadow-2xl">

                <div class="text-center mb-8">
                    <h1 class="text-3xl font-bold text-white mb-2">Create Account</h1>
                    <p class="text-gray-400">Join V0 Trade and start trading today</p>
                </div>

                <div id="messageBox" class="hidden mb-4 p-4 rounded-lg"></div>

                <form id="signupForm" class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium mb-2">Full Name</label>
                        <input id="fullname" type="text" required class="w-full px-4 py-3 bg-slate-800/50 border border-purple-500/30 rounded-lg text-white">
                    </div>

                    <div>
                        <label class="block text-sm font-medium mb-2">Email</label>
                        <input id="email" type="email" required class="w-full px-4 py-3 bg-slate-800/50 border border-purple-500/30 rounded-lg text-white">
                    </div>

                    <div>
                        <label class="block text-sm font-medium mb-2">Password</label>
                        <input id="password" type="password" required class="w-full px-4 py-3 bg-slate-800/50 border border-purple-500/30 rounded-lg text-white">
                    </div>

                    <div>
                        <label class="block text-sm font-medium mb-2">Confirm Password</label>
                        <input id="confirm-password" type="password" required class="w-full px-4 py-3 bg-slate-800/50 border border-purple-500/30 rounded-lg text-white">
                    </div>

                    <button id="submitBtn" type="submit" class="w-full bg-gradient-to-r from-purple-500 via-pink-500 to-purple-500 text-white py-3 rounded-lg font-bold transition-all">
                        Create Account
                    </button>
                </form>

            </div>
        </div>
    </main>

<script>
/* --- BASEROW CONFIG --- */
const USERS_API = "https://api.baserow.io/api/database/rows/table/755975/";
const WALLETS_API = "https://api.baserow.io/api/database/rows/table/756077/";
const BASEROW_TOKEN = "LG6hnTBxgBG78FueElsSwpHRd4Wep1oL";

/* User fields */
const FIELD_FULLNAME = "field_6393282";
const FIELD_EMAIL = "field_6393283";
const FIELD_PASSWORD = "field_6393285";

/* Wallet fields */
const WALLET_EMAIL = "field_6394418";
const WALLET_DEPOSIT = "field_6394419";
const WALLET_RETURNED = "field_6394420";
const WALLET_COMMISSIONS = "field_6394421";
const WALLET_EARNINGS = "field_6394422";
const WALLET_EARNING_BALANCE = "field_6394423";

/* --- HASH PASSWORD (SHA-256) --- */
async function hashPassword(password) {
    const msgUint8 = new TextEncoder().encode(password);
    const hashBuffer = await crypto.subtle.digest("SHA-256", msgUint8);
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
}

function showMessage(text, error=false) {
    const box = document.getElementById("messageBox");
    box.textContent = text;
    box.className = error 
        ? "mb-4 p-4 rounded-lg bg-red-500/20 border border-red-500/50 text-red-300"
        : "mb-4 p-4 rounded-lg bg-green-500/20 border border-green-500/50 text-green-300";
    box.classList.remove("hidden");
}

/* --- SUBMIT SIGNUP --- */
document.getElementById("signupForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    const fullname = document.getElementById("fullname").value.trim();
    const email = document.getElementById("email").value.trim();
    const pass = document.getElementById("password").value;
    const confirm = document.getElementById("confirm-password").value;

    if (pass !== confirm) {
        showMessage("Passwords do not match!", true);
        return;
    }

    const hashed = await hashPassword(pass);

    /* --- Create User in USERS Table --- */
    const userPayload = {
        [FIELD_FULLNAME]: fullname,
        [FIELD_EMAIL]: email,
        [FIELD_PASSWORD]: hashed
    };

    const res = await fetch(USERS_API, {
        method: "POST",
        headers: {
            "Authorization": "Token " + BASEROW_TOKEN,
            "Content-Type": "application/json"
        },
        body: JSON.stringify(userPayload)
    });

    const userData = await res.json();

    if (!res.ok) {
        showMessage(userData.error || "Signup failed", true);
        return;
    }

    /* --- AUTO CREATE WALLET ENTRY --- */
    const walletPayload = {
        [WALLET_EMAIL]: email,
        [WALLET_DEPOSIT]: "0.00",
        [WALLET_RETURNED]: "0.00",
        [WALLET_COMMISSIONS]: "0.00",
        [WALLET_EARNINGS]: "0.00",
        [WALLET_EARNING_BALANCE]: "0.00"
    };

    await fetch(WALLETS_API, {
        method: "POST",
        headers: {
            "Authorization": "Token " + BASEROW_TOKEN,
            "Content-Type": "application/json"
        },
        body: JSON.stringify(walletPayload)
    });

    /* --- SUCCESS --- */
    showMessage("Account created successfully!");
    setTimeout(() => window.location.href = "dashboard.html", 1200);
});

function toggleMobileMenu() {
    document.getElementById("mobileMenu").classList.toggle("active");
}
</script>


</body>
</html>
